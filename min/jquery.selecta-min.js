!function($){$.fn.selectaValues=function(){console.log($(this).data("selects"))},$.fn.selecta=function(){l("selecta called"),this.doms=[],console.log(1,this);var e=this;return $.each(this,function(t,s){var a=[];e.doms[t]=[],$(s).hide(),_self.multiple=$(s).prop("multiple"),$(s).after('<div class="selectaDom clearfix"><div class="selecta-sel"></div><ul class="selecta-list" data-idx="'+t+'"></ul><div class="selecta-hidden" style="display:none;"></div></div>'),selectaDom=$(s).next(".selectaDom");var n=[];$.each($(s).find("option"),function(e,t){var l=$(t).prop("value"),s=$(t).text();n[e]={v:l,t:s},selectaDom.find(".selecta-list").append('<li value="'+l+'">'+s+"</li>")}),selectaDom.find(".selecta-sel").on("click",function(e){$(e.currentTarget).siblings(".selecta-list").is(":visible")?$(e.currentTarget).siblings(".selecta-list").hide():$(e.currentTarget).siblings(".selecta-list").show()}),selectaDom.find(".selecta-sel").on("click","span.label > span.glyphicon-remove",function(e){e.preventDefault();var l=$(this).siblings("span"),s=l.data("v"),n=l.text(),i=a[t];a[t]=i.filter(function(e){return e.v!==s&&e.t!==n}),selecta_li=selectaDom.find('.selecta-list > li.selected[value="'+s+'"]'),$.each(selecta_li,function(e,t){$(t).html()===n&&$(t).removeClass("selected")}),console.log(selecta_li);var c=$(selectaDom).find(".selecta-sel");return c.empty(),$(a[t]).each(function(e,t){c.append('<span class="label label-info"><span data-v="'+t.v+'">'+t.t+'</span><span class="glyphicon glyphicon-remove"></span></span>')}),!1}),$(selectaDom).find(".selecta-list > li").off("click").on("click",function(e){var t=$(e.currentTarget).attr("value"),n=e.currentTarget.textContent,i=+$(e.currentTarget).parent().data("idx");void 0==a[i]&&(a[i]=[]);var c=a[i],r=c.find(function(e){return e.v===t&&e.t===n});void 0==r?(l(_self.multiple),_self.multiple?c.push({v:t,t:n}):(c=[{v:t,t:n}],l(c),$(e.currentTarget).siblings("li").removeClass("selected")),$(e.currentTarget).addClass("selected")):(a[i]=c.filter(function(e){return e.v!==t&&e.t!==n}),$(e.currentTarget).removeClass("selected"));var o=$(selectaDom).find(".selecta-sel");o.empty(),$(a[i]).each(function(e,t){o.append('<span class="label label-info"><span data-v="'+t.v+'">'+t.t+'</span><span class="glyphicon glyphicon-remove"></span></span>')}),$(e.currentTarget).parent().hide(),$(s).data("selects",JSON.stringify(a[i]))})})}}(jQuery);